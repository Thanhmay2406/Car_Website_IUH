<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../assets/images/logo/logo.png" type="image/x-icon">
    <script src="../assets/js/components/header.js"></script>
    <script src="../assets/js/components/footer.js"></script>
    <link rel="stylesheet" href="../assets/css/pages/test-drive.css">
    <title>Đăng ký lái thử</title>
    <style>
        .error {
            color: red;
            font-size: 0.8rem;
            margin-top: 0.2rem;
            display: none;
        }
        input:invalid, select:invalid, textarea:invalid {
            border-color: red;
        }
        input:valid, select:valid, textarea:valid {
            border-color: green;
        }
        #submitBtn {
            padding: 10px 20px;
            background-color: #3878d6;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 20px;
        }
        #submitBtn:hover {
            background-color: #2c62b5;
        }
    </style>
</head>

<body>
    <div class="container">
        <header-component></header-component>
        <div class="form-container">
            <div id="left">
                <h1>ĐĂNG KÝ LÁI THỬ BMW</h1>
            </div>
            <div id="right">
                <form id="testDriveForm">
                    <table>
                        <tr>
                            <td>
                                Danh Xưng
                            </td>
                            <td>
                                <select name="title" id="title" required>
                                    <option value="">Please select...</option>
                                    <option value="Anh">Anh</option>
                                    <option value="Chị">Chị</option>
                                </select>
                                <div class="error" id="titleError">Vui lòng chọn danh xưng</div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                Tên
                            </td>
                            <td>
                                <input type="text" name="firstName" id="firstName" required>
                                <div class="error" id="firstNameError">Vui lòng nhập tên</div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                Họ
                            </td>
                            <td>
                                <input type="text" name="lastName" id="lastName" required>
                                <div class="error" id="lastNameError">Vui lòng nhập họ</div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                Số điện thoại
                            </td>
                            <td>
                                <input type="tel" name="phone" id="phone" pattern="[0-9]{10,11}" required>
                                <div class="error" id="phoneError">Vui lòng nhập số điện thoại hợp lệ (10-11 số)</div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                Email
                            </td>
                            <td>
                                <input type="email" name="email" id="email" required>
                                <div class="error" id="emailError">Vui lòng nhập email hợp lệ</div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                Thành phố, tỉnh
                            </td>
                            <td>
                                <select name="provinces" id="provinces" required>
                                    <option value="">Chọn tỉnh/thành</option>
                                    <option value="An Giang">An Giang</option>
                                    <!-- Các tỉnh khác giữ nguyên -->
                                </select>
                                <div class="error" id="provinceError">Vui lòng chọn tỉnh/thành</div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                Quận/Huyện
                            </td>
                            <td>
                                <textarea name="district" id="district" required></textarea>
                                <div class="error" id="districtError">Vui lòng nhập quận/huyện</div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                Mẫu xe quý khách muốn thử
                            </td>
                            <td>
                                <select name="cars" id="cars" required>
                                    <option value="">Please select ...</option>
                                    <option value="BMW 3 Series Sedan">BMW 3 Series Sedan</option>
                                    <!-- Các mẫu xe khác giữ nguyên -->
                                </select>
                                <div class="error" id="carError">Vui lòng chọn mẫu xe</div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                Showroom
                            </td>
                            <td>
                                <select name="bmw_location" id="bmw_location" required>
                                    <option value="">Please select ...</option>
                                    <option value="le-duan">BMW Lê Duẩn</option>
                                    <!-- Các showroom khác giữ nguyên -->
                                </select>
                                <div class="error" id="locationError">Vui lòng chọn showroom</div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                Thông tin yêu cầu khác
                            </td>
                            <td>
                                <textarea name="note" id="note"></textarea>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                Chính sách bảo mật
                            </td>
                            <td>
                                <div style="display: flex;">
                                    <input type="checkbox" name="privacy" id="privacy" required style="padding: 0; margin: 0; width: 20px; height: 20px;">
                                    <p style="margin-left: 10px;">Tôi đồng ý</p>
                                </div>
                                <div class="error" id="privacyError">Bạn phải đồng ý với chính sách bảo mật</div>
                            </td>
                        </tr>
                    </table>
                    <ol>
                        <li>
                            Tôi trên 18 tuổi và tôi có bằng lái xe B2 hợp lệ.*
                        </li>
                        <li>
                            Tôi đồng ý để THACO (và các công ty liên kết, đối tác của THACO) thu thập, sử dụng, hiệu chỉnh,
                            lưu trữ, sao chép thông tin của tôi, cung cấp thông tin trên cho bên thứ ba có liên quan (bao
                            gồm nhưng không giới hạn các công ty thuộc Tập đoàn BMW) nhằm mục đích chăm sóc khách hàng, gửi
                            thiệp mời đến các sự kiện, các hoạt động tiếp thị, nghiên cứu và các mục đích thống kê khác giữa
                            các đối tác hoặc công ty thành viên của tập đoàn BMW. Tôi cũng biết rằng thông tin cá nhân của
                            tôi sẽ được sử dụng dựa trên luật bảo vệ sự riêng tư hiện hành.*
                        </li>
                        <li>
                            Tôi cũng đồng ý để THACO (và các công ty liên kết, đối tác của THACO) liên hệ với tôi nhằm mục
                            đích thực hiện chương trình quảng cáo/ chăm sóc khách hàng qua số điện thoại/ email và thông tin
                            liên hệ khác mà tôi đã đăng ký (dù tôi đã đăng ký danh sách không quảng cáo hay không)
                        </li>
                    </ol>

                    <div style="width: 100%; text-align: center;">
                        <button type="submit" id="submitBtn">Submit</button>
                    </div>
                </form>
            </div>
        </div>
        <footer-component></footer-component>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('testDriveForm');
            
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Reset all error messages
                const errorElements = document.querySelectorAll('.error');
                errorElements.forEach(el => el.style.display = 'none');
                
                let isValid = true;
                
                // Validate each field
                if (!document.getElementById('title').value) {
                    document.getElementById('titleError').style.display = 'block';
                    isValid = false;
                }
                
                if (!document.getElementById('firstName').value.trim()) {
                    document.getElementById('firstNameError').style.display = 'block';
                    isValid = false;
                }
                
                if (!document.getElementById('lastName').value.trim()) {
                    document.getElementById('lastNameError').style.display = 'block';
                    isValid = false;
                }
                
                const phone = document.getElementById('phone').value;
                if (!phone || !/^\d{10,11}$/.test(phone)) {
                    document.getElementById('phoneError').style.display = 'block';
                    isValid = false;
                }
                
                const email = document.getElementById('email').value;
                if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    document.getElementById('emailError').style.display = 'block';
                    isValid = false;
                }
                
                if (!document.getElementById('provinces').value) {
                    document.getElementById('provinceError').style.display = 'block';
                    isValid = false;
                }
                
                if (!document.getElementById('district').value.trim()) {
                    document.getElementById('districtError').style.display = 'block';
                    isValid = false;
                }
                
                if (!document.getElementById('cars').value) {
                    document.getElementById('carError').style.display = 'block';
                    isValid = false;
                }
                
                if (!document.getElementById('bmw_location').value) {
                    document.getElementById('locationError').style.display = 'block';
                    isValid = false;
                }
                
                if (!document.getElementById('privacy').checked) {
                    document.getElementById('privacyError').style.display = 'block';
                    isValid = false;
                }
                
                if (isValid) {
                    // Form is valid, you can submit it or process the data
                    alert('Đăng ký lái thử thành công! Chúng tôi sẽ liên hệ với bạn sớm.');
                    form.reset();
                    
                    // Or submit the form to server
                    // form.submit();
                }
            });
            
            // Real-time validation for some fields
            document.getElementById('phone').addEventListener('input', function() {
                const phone = this.value;
                if (phone && !/^\d{0,11}$/.test(phone)) {
                    this.value = phone.slice(0, -1);
                }
            });
        });
    </script>
</body>

</html>